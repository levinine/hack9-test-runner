config:
  target: "http://localhost:8080/reference"
  http:
    pool: 2000 # number of http connections used for tests, default is one connection per virtual user
    maxSockets: 3 # number of sockets per virtual user, default is 1
    timeout: 2 # request timeout in seconds
  phases:
    -
      duration: 10
      arrivalCount: 10000
      # rampTo: 15
  payload:
    path: "data-100k.csv"
    fields:
      - "calling"
      - "called"
      - "start"
      - "duration"
    order: "sequence"
  processor: "./functions.js"
scenarios:
  - 
    flow:
      -
        get:
          url: "/switch/price?number={{called}}&time={{start}}"
          # afterResponse: "logErrorResponses"
      -
        get:
          url: "/switch/price?number={{called}}&time={{start}}"
          # afterResponse: "logErrorResponses"
      -
        get:
          url: "/switch/price?number={{called}}&time={{start}}"
          # afterResponse: "logErrorResponses"
      -
        get:
          url: "/switch/price?number={{called}}&time={{start}}"
          # afterResponse: "logErrorResponses"
      -
        post:
          url: "/switch/call"
          json:
            calling: "{{calling}}"
            called: "{{called}}"
            start: "{{start}}"
            duration: "{{duration}}"
          # afterResponse: "logErrorResponses"
      -
        post:
          url: "/switch/call"
          json:
            calling: "{{calling}}"
            called: "{{called}}"
            start: "{{start}}"
            duration: "{{duration}}"
          # afterResponse: "logErrorResponses"
      -
        post:
          url: "/switch/call"
          json:
            calling: "{{calling}}"
            called: "{{called}}"
            start: "{{start}}"
            duration: "{{duration}}"
          # afterResponse: "logErrorResponses"
